// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  previewFeatures = ["referentialIntegrity"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
  referentialIntegrity = "prisma"
}

model Members {
    email                     String          @id
    password                  String          
    nickname                  String          @unique
    sex                       String          // F:여자 / M:남자
    age                       Int
    region                    String          //         
    userRole                  String          // seller / user / admin
    userImage                 String?         
    registerId                String            
    registerDate              DateTime        @updatedAt   
       
    boardLists                BoardList[]    
    boardComments             BoardComment[]  
}

model BoardList {
    listId                    String          @id
    listTitle                 String          
    writerEmail               String          
    listContent               String          @db.LongText
    viewCount                 Decimal         @db.Decimal(15, 0)
    answerCount               Decimal         @db.Decimal(15, 0)
    registerId                String            
    registerDate              DateTime        @updatedAt        
 
    writer                    Members?        @relation(fields: [writerEmail], references: [email])
}

model BoardComment {
    listId                    String  
    commentSequence           Decimal         @db.Decimal(15, 0)
    nestedCommentSequence     Decimal         @db.Decimal(15, 0)   // 원댓글:0, 대댓글: 1이상
    writerEmail               String     
    commentContent            String
    registerId                String            
    registerDate              DateTime        @updatedAt  
            
    writer                    Members?        @relation(fields: [writerEmail], references: [email])

    @@id([listId, commentSequence, nestedCommentSequence])
}

model BoardAnswer {
    listId                    String
    answerCategory            String            
    answerSequence            Decimal         @db.Decimal(15, 0)
    answerContent             String          @db.LongText
    answerSelectionCount      Decimal         @db.Decimal(15, 0)
    registerId                String            
    registerDate              DateTime        @updatedAt    

    @@id([listId, answerSequence])
}

